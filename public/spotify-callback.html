<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Spotify Authentication</title>
	</head>
	<body>
		<h2>Authenticating with Spotify...</h2>
		<script>
			window.onload = function () {
				const fragment = new URLSearchParams(window.location.hash.substr(1));
				const accessToken = fragment.get('access_token');

				if (accessToken) {
					window.opener.postMessage({ type: 'spotify-token', token: accessToken }, window.location.origin);
				} else {
					console.error('No access token found in URL');
				}

				setTimeout(() => window.close(), 1000);
			};
		</script>
	</body>
</html>
